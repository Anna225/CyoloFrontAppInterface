@using Microsoft.AspNetCore.Http;
@{
    var fullName = @ViewBag.Lawyer.name + " " + @ViewBag.Lawyer.sureName;
    ViewData["Title"] = "Welcome " + fullName + "!";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h1 class="thumb-text">@ViewData["Title"]</h1>
@using (Html.BeginForm("GetByEmailAndDate", "CourtCase", FormMethod.Get, new { id = "searchform" }))
{
    <div class="row">
        <div class="form-group col-md-4">
            @Html.Label("name", "Lawyer's Full Name")
            @Html.TextBox("name", (string)@fullName, new { @class = "form-control", @placeholder="Ex:Nadia Ouzoubair", @onkeypress="keypresshandle(event)" })
            <p class="error">Please enter lawyer's name.</p>
        </div>
        <div class="form-group col-md-3">
            @Html.Label("date", "Date")
            <input id="date" name="date" width="276" value="@ViewBag.Today" data-format="yyyy-mm-dd" class="form-control" onkeypress="keypresshandle(event)" placeholder="Ex:1970-01-01" />
            <p class="error">Please select date.</p>
        </div>
        <div class="form-group col-md-5">
            <hr style="line-height: 24px; visibility: hidden; margin-bottom: 14px;" />
            <a class="btn btn-success" onclick="submitForm()">Search</a>
            <button type="button" class="btn btn-warning align-right" data-toggle="modal" data-target="#myModal">Upload Agendas</button>
        </div>      
    </div>
}
<p>Any suggestions for an upgrade? Please <a href="https://create@cyolo.com">contact us</a>.</p>
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>No</th>
            <th>CourtCaseNo</th>
            <th>CourtType</th>
            <th>CourtLocation</th>
            <th>ChamberID</th>
            <th>HearingDate</th>
            <th>HearingTime</th>
            <th>HearingType</th>
            <th>Offer on request representaion</th>
        </tr>
    </thead>
    <tbody>
        @{
            var i = 0;
        }
        @if (ViewBag.Model == null || ViewBag.Model.Count == 0){
            <tr>
                <td colspan="9" class="text-center">No matching data found.</td>
            </tr>
        }else{        
            @foreach (var item in ViewBag.Model)
            {
                <tr>
                    <td>@(i + 1)</td>
                    <td>@item.courtcase.courtCaseNo</td>
                    <td>@item.courtcase.courtType</td>
                    <td>@item.courtcase.courtLocation</td>
                    <td>@item.courtcase.chamberID</td>
                    <td>@item.courtcase.hearingDate</td>
                    <td>@item.courtcase.hearingTime</td>
                    <td>@item.courtcase.hearingType</td>
                    <td>
                        @{string courtcaseid = Convert.ToString(item.courtcase.courtCaseNo);}
                        <a href="#" class="btn btn-success btn-approve" data-caseno="@item.courtcase.courtCaseNo" data-email="@ViewData["Message"]">Available</a>
                        @Html.ActionLink("Request", "Match", "CourtCase",
                            new { courtCaseNo =  courtcaseid },
                            new { @class = "btn btn-warning"}
                        )
                    </td>
                </tr>
                i++;
            }
        }
    </tbody>
</table>
<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Upload Agenda</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>Court Case No</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="courtcaseno" placeholder="Court Case No" class="form-control" />
                        <p class="error">Please enter court case number.</p>
                    </div>
                    <div class="col-md-2">
                        <label>UploaderEmail</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="uploaderemail" value="" placeholder="Uploader Email" class="form-control" />
                        <p class="error">Please enter Email.</p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>Court Type</label>
                    </div>
                    <div class="col-md-10">
                        @Html.DropDownList("courttype",
                            new SelectList(ViewBag.CourtTypes),
                            "",
                            new { @class = "form-control", @id = "courttype" })
                        <p class="error">Please select court type.</p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>CourtLocation</label>
                    </div>
                    <div class="col-md-10">
                        @Html.DropDownList("courtlocation",
                            new SelectList(ViewBag.CourtLocations),
                            "",
                            new { @class = "form-control", @id = "courtlocation" })
                        <p class="error">Please select court location.</p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>Chamber ID</label>
                    </div>
                    <div class="col-md-4">
                        @Html.DropDownList("chamberid",
                            new SelectList(ViewBag.ChamberIds),
                            "",
                            new { @class = "form-control", @id = "chamberid" })
                        <p class="error">Please select chamberid.</p>
                    </div>
                    <div class="col-md-2">
                        <label>Hearing Type</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="hearingtype" placeholder="Hearing Type" class="form-control" />
                        <p class="error">Please enter hearing type.</p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>First Name</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="firstname" placeholder="First Name" class="form-control" />
                        <p class="error">Please enter first name.</p>
                    </div>
                    <div class="col-md-2">
                        <label>Last Name</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="lastname" placeholder="Last Name" class="form-control" />
                        <p class="error">Please enter last name.</p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-md-2">
                        <label>Hearing Date</label>
                    </div>
                    <div class="col-md-4">
                        <input id="hearingdate" name="hearingdate" width="236" value="@ViewBag.Today" data-format="yyyy-mm-dd" class="form-control" placeholder="Ex:1970-01-01" />
                        <p class="error">Please enter hearing date.</p>
                    </div>
                    <div class="col-md-2">
                        <label>Hearing Time</label>
                    </div>
                    <div class="col-md-4">
                        <input id="hearingtime" name="hearingtime" width="236" data-format="HH:mm" class="form-control" placeholder="Ex:14:23" />
                        <p class="error">Please enter hearing time.</p>
                    </div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-upload">Upload</button>
            </div>

        </div>
    </div>
</div>
<script>
    function submitForm() {
        if($("#name").val() == ''){
            $("#name").siblings().addClass("b");
            $("#name").focus();
            return;
        }else{
            $("#name").siblings().removeClass("b");
        }
        if ($("#date").val() == '') {
            $("#date").siblings().addClass("b");
            $("#date").focus();
            return;
        } else {
            $("#date").siblings().removeClass("b");
        }
        $("#searchform").submit();
    }
    function keypresshandle(e) {
        if (e.keyCode === 13) {
            e.preventDefault();
            if ($("#name").val() == '') {
                $("#name").siblings().addClass("b");
                $("#name").focus();
                return;
            } else {
                $("#name").siblings().removeClass("b");
            }
            if ($("#date").val() == '') {
                $("#date").siblings().addClass("b");
                $("#date").focus();
                return;
            } else {
                $("#date").siblings().removeClass("b");
            }
            $("#searchform").submit();
        }
    }
</script>