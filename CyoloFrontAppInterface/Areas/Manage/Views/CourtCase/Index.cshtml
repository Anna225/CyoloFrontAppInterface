@using Microsoft.AspNetCore.Http;
@{
    var fullName = @ViewBag.Lawyer.name + " " + @ViewBag.Lawyer.sureName;
    ViewData["Title"] = "Welcome " + fullName + "!";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h1 class="thumb-text">@ViewData["Title"]</h1>
@using (Html.BeginForm("GetByEmailAndDate", "CourtCase", FormMethod.Get, new { id = "searchform" }))
{
    <div class="row">
        <div class="form-group col-md-4">
            @Html.Label("name", "Lawyer's Full Name")
            @Html.TextBox("name", (string)@fullName, new { @class = "form-control", @placeholder="Ex:Nadia Ouzoubair", @onkeypress="keypresshandle(event)" })
        </div>
        <div class="form-group col-md-4">
            @Html.Label("date", "Date")
            @Html.TextBox("date", (string)@ViewBag.Today, new { @class = "form-control", @placeholder="Ex:1970-01-01", @onkeypress="keypresshandle(event)" })
        </div>
        <div class="form-group col-md-4">
            <hr style="line-height: 24px; visibility: hidden; margin-bottom: 14px;" />
            <a class="btn btn-success" onclick="submitForm()">Search</a>
            <a class="btn btn-warning align-right" href="@Url.Action($"Uploads")">Upload Agendas</a>
        </div>
    </div>
}
<p>Any suggestions for an upgrade? Please <a href="https://create@cyolo.com">contact us</a>.</p>
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>No</th>
            <th>CourtCaseNo</th>
            <th>CourtType</th>
            <th>CourtLocation</th>
            <th>ChamberID</th>
            <th>HearingDate</th>
            <th>HearingTime</th>
            <th>HearingType</th>
            <th>Offer on request representaion</th>
        </tr>
    </thead>
    <tbody>
        @{
            var i = 0;
        }
        @if (ViewBag.Model == null || ViewBag.Model.Count == 0){
            <tr>
                <td colspan="9" class="text-center">No matching data found.</td>
            </tr>
        }else{        
            @foreach (var item in ViewBag.Model)
            {
                <tr>
                    <td>@(i + 1)</td>
                    <td>@item.courtcase.courtCaseNo</td>
                    <td>@item.courtcase.courtType</td>
                    <td>@item.courtcase.courtLocation</td>
                    <td>@item.courtcase.chamberID</td>
                    <td>@item.courtcase.hearingDate</td>
                    <td>@item.courtcase.hearingTime</td>
                    <td>@item.courtcase.hearingType</td>
                    <td>
                        @{string courtcaseid = Convert.ToString(item.courtcase.courtCaseNo);}
                        <a href="#" class="btn btn-success btn-approve" data-caseno="@item.courtcase.courtCaseNo" data-email="@ViewData["Message"]">Available</a>
                        @Html.ActionLink("Request", "Match", "CourtCase",
                            new { courtCaseNo =  courtcaseid },
                            new { @class = "btn btn-warning"}
                        )
                    </td>
                </tr>
                i++;
            }
        }
    </tbody>
</table>
<script>
    function submitForm() {
        $("#searchform").submit();
    }
    function keypresshandle(e) {
        if (e.keyCode === 13) {
            e.preventDefault();
            $("#searchform").submit();
        }
    }
</script>